
# Entering and formatting data {#don}

Once the field measurements phase has been completed, and before any analysis, the data collected need to be given structure, which includes data entry, cleansing and formatting.


## Data entry

This consists in transferring the data recorded on the field forms into a computer file. The first step is to choose the software. For a small dataset, a spreadsheet such as Microsoft Excel or OpenOffice Calc may be sufficient. For more substantial campaigns, a database management system such as Microsoft Access or MySQL (\url{www.mysql.com}) should be used.


### Data entry errors

The data must be entered as carefully as possible to minimize errors. One of the methods used to achieve this is double data entry: one operator enters the data, a second operator (if possible different from the first) repeats the data entry in a manner entirely independent from the first. The two files can then simply be compared to detect any data entry errors. As it is unlikely that the two operators will make the same data entry error, this method guarantees good quality data entry. But it is time consuming and tedious.

Certain details, that have their importance, must also be respected during data entry. First, numbers must be distinguished from character strings. For the statistical software that will subsequently process the data, a number does not have the same role as a character string. This distinction must therefore be made during data entry. A number will be interpreted as the value of a numerical variable, whereas a character string will be interpreted as the category of a qualitative variable. The difference between the two is generally obvious, but not always. Let us, for instance, consider latitudes and longitudes. If we want to calculate the correlation between the latitude or the longitude and another variable (to identify a north-south or east-west gradient), the software must perceive the geographic coordinates as being numbers. These geographic coordinates must not therefore be entered as 7$^{\circ}$28'55.1" or 13$^{\circ}$41'25.9" as they would be interpreted as qualitative variables, and no calculations would be possible. A possible solution consists in converting geographic coordinates into decimal values. Another solution consists in entering geographic coordinated in three columns (one for degrees, one for minutes, and the third for seconds).

When entering qualitative variables, care must be taken to avoid entering strings of great length as this enhances the risk of making data entry errors. It is far better to enter a short code and in the meta-information (see below) give the meaning of the code.

Another important detail is the decimal symbol used. Practically all statistical software packages can switch from the comma (symbol used in French) to the period (symbol used in English), therefore one or the other may be used. By contrast, if you choose to use a comma or a period as the decimal symbol, you must stick to this throughout the data entry operation. If you use one, then the other, some of the normally numerical data will be interpreted by the statistical software as character strings.


### Meta-information

When entering data, some thought must be given to the meta-information, i.e. the information that accompanies the data, without in itself being measured data. Meta-information will, for instance, give the date on which measurements were taken, and by whom. If codes are used during data entry, the meta-information will specify what these codes mean. For example, it is by no means rare for the names of species to be entered in a shortened form. A species code such as ANO in dry, west African savannah for instance is ambiguous: it could mean *Annona senegalensis* or *Anogeissus
leiocarpus*. The meta-information is there to clear up this ambiguity. This meta-information must also specify the nature of the variables measured. For example, if tree girth is measured, then noting "girth" in the data table is in itself insufficient. The meta-information must specify at what height tree girth was measured (at the base, at 20 cm, at 1.30\ m\ldots) and, an extremely important point, in which units this girth is expressed (in cm, dm\ldots). It is essential that the units in which each variable was measured must be specified in the meta-information. All too often, data tables fail to specify in which units the data are expressed, and this gives rise to extremely hazardous guessing games.

For the people who designed the measuring system and supervised the actual taking of measurements, these details given in the meta-information are often obvious and they do not see the need to spend time providing this information. But let us imagine the situation facing persons who were not involved in the measurements and who review the data 10 years later. If the meta-information has been correctly prepared, these persons should be able to work on the dataset as if they had constituted it themselves.


### Nested levels

The data should be entered in the spreadsheets as one line per individual. If the data include several nested levels, then as many data tables as there are levels should be prepared. Let us imagine that we are looking to construct a table for high forest coppice formations on a regional scale. For multistemmed individuals, the volume of each stem is calculated separately. Individuals should be selected within the land plots, themselves selected within the forests distributed across the study area. This therefore gives rise to four nested levels: the forest, which includes several plots; the plot, which includes several trees; the tree, which includes several stems; and finally the stem. Four data tables should therefore be prepared (Figure \@ref(fig:niv)). Each data table will include the data describing the individuals of the corresponding level, with one worksheet line per individual. For example, this first data table will give the area of each forest. The second will give the geographic coordinates of each plot. The third data table will give the species and its coordinates for each tree in the plot. Finally, the fourth data table will give the volume and size of each stem. Therefore, to each line in a data table will correspond several lines in the lower level data table. A code should be used to establish the correspondence between the lines in the different data tables. For instance, the number of the forest should be repeated in the "forest" and "plot", data tables, the number of the plot should be repeated in the "plot" and "tree", data tables, and the number of the tree should be repeated in the "tree" and
"stem" data tables (Figure \@ref(fig:niv)).

```{r niv, fig.cap="(ref:niv)"}

knitr::include_graphics(paste0(fig_path, "/nested.pdf"))

```


```{r one}

kab <- tibble(
  forest    = c(       1,          1,           1,           1,           2, "$\\vdots$"),
  area      = c(     400,        400,         400,         400,         650, "$\\vdots$"),
  plot      = c(     1.1,        1.1,         1.1,         1.2, "$\\vdots$", "$\\vdots$"),
  longitude = c(   7.345,      7.345,       7.345,       7.832, "$\\vdots$", "$\\vdots$"),
  latitude  = c(  12.146,     12.146,      12.146,      12.253, "$\\vdots$", "$\\vdots$"),
  tree      = c(  "1.1.1",   "1.1.1",     "1.1.2", "$\\vdots$", "$\\vdots$", "$\\vdots$"),
  species   = c(    "ANO",     "ANO",       "GUI", "$\\vdots$", "$\\vdots$", "$\\vdots$"),
  x         = c(      3.2,       3.2,         7.2, "$\\vdots$", "$\\vdots$", "$\\vdots$"),
  y         = c(      4.5,       4.5,         2.1, "$\\vdots$", "$\\vdots$", "$\\vdots$"),
  stem      = c("1.1.1.1", "1.1.1.2", "$\\vdots$", "$\\vdots$", "$\\vdots$", "$\\vdots$"), 
  D         = c(       20,        12, "$\\vdots$", "$\\vdots$", "$\\vdots$", "$\\vdots$"),
  H         = c(       18,        15, "$\\vdots$", "$\\vdots$", "$\\vdots$", "$\\vdots$"),
  V         = c(      2.3,       1.9, "$\\vdots$", "$\\vdots$", "$\\vdots$", "$\\vdots$")
)

kab_opt <- list(
  x = kab,
  caption = "(ref:one)",
  col.names = c("forest", "area", "plot", "longitude", "latitude", "tree", "species", "$x$", "$y$", "stem", "$D$", "$H$", "$V$"),
  #booktabs = TRUE,
  escape = F,
  align = "ccccccccccccc"
)

display_table()
#kable(kab_opt, format = "html")

```






